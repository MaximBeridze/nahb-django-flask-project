{% extends "base.html" %}
{% block content %}
  <h2>Story #{{ story_id }}</h2>
  <div class="row">
    <div class="pill">Score: {{ score }}</div>
    {% if needs_roll %}
      <div class="pill">Dice: {% if last_roll %}{{ last_roll }}{% else %}not rolled{% endif %}</div>
    {% endif %}
  </div>

  <div class="card">
    {% if page.illustration_url %}
      <img class="hero" src="{{ page.illustration_url }}" alt="illustration"/>
    {% endif %}
    <pre class="storytext">{{ page.text }}</pre>
  </div>

  {% if needs_roll and not last_roll %}
    <form method="post" class="row">
      {% csrf_token %}
      <input type="hidden" name="action" value="roll"/>
      <button class="btn secondary">Roll dice</button>
    </form>
    <p class="muted">Some choices may be locked until you roll.</p>
  {% endif %}

  <form method="post" class="choices">
    {% csrf_token %}
    <input type="hidden" name="action" value="choose"/>
    {% for c in choices %}
      <button class="choice" name="choice_id" value="{{ c.id }}">{{ c.text }}</button>
    {% empty %}
      <p class="muted">No available choices (try rolling).</p>
    {% endfor %}
  </form>
{% endblock %}
